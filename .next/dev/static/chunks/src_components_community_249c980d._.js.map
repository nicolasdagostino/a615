{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicolasdagostino/Desktop/Proyecto/A615/src/components/community/NotificationItem.tsx"],"sourcesContent":["import type { CommunityNotification } from \"./notificationsMock\";\n\nfunction getActor(n: any) {\n  return (\n    n?.actor?.name ??\n    n?.actorName ??\n    n?.user?.name ??\n    n?.userName ??\n    n?.name ??\n    n?.author ??\n    n?.from ??\n    n?.gymName ??\n    \"Notificación\"\n  );\n}\n\nfunction getAction(n: any) {\n  return (\n    n?.action ??\n    n?.verb ??\n    n?.typeLabel ??\n    n?.message ??\n    n?.text ??\n    \"envió una notificación\"\n  );\n}\n\nfunction getTarget(n: any) {\n  return n?.target ?? n?.object ?? n?.className ?? n?.wodTitle ?? n?.topic ?? \"\";\n}\n\nfunction safeDate(n: any) {\n  const raw = n?.date ?? n?.createdAt ?? n?.at ?? n?.time ?? n?.timestamp;\n  const d = raw ? new Date(raw) : new Date();\n  return isNaN(d.getTime()) ? new Date() : d;\n}\n\nfunction formatDateES(d: Date) {\n  // \"03 Ene 2026\"\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  const months = [\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"];\n  const mm = months[d.getMonth()] ?? \"\";\n  return `${dd} ${mm} ${d.getFullYear()}`;\n}\n\nexport default function NotificationItem({\n  item,\n}: {\n  item: CommunityNotification | any;\n}) {\n  const d = safeDate(item);\n  const actor = getActor(item);\n  const action = getAction(item);\n  const target = getTarget(item);\n\n  const title =\n    item?.title ??\n    item?.subject ??\n    item?.headline ??\n    \"\"; // opcional\n\n  const subtitle =\n    item?.description ??\n    item?.body ??\n    item?.subtitle ??\n    \"\"; // lo que sería “mensaje”\n\n  return (\n    <div className=\"px-5 py-4\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"min-w-0\">\n          <div className=\"mb-1 space-x-1 text-sm text-gray-500 dark:text-gray-400\">\n            <span className=\"font-medium text-gray-800 dark:text-white/90\">\n              {actor}\n            </span>\n            <span>{action}</span>\n            {target ? (\n              <span className=\"font-medium text-gray-800 dark:text-white/90\">\n                {target}\n              </span>\n            ) : null}\n          </div>\n\n          {title ? (\n            <div className=\"text-sm font-medium text-gray-800 dark:text-white/90\">\n              {title}\n            </div>\n          ) : null}\n\n          {subtitle ? (\n            <div className=\"mt-1 text-sm text-gray-700 dark:text-gray-200\">\n              {subtitle}\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"shrink-0 text-xs text-gray-500 dark:text-gray-400\">\n          {formatDateES(d)}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,SAAS,CAAM;IACtB,OACE,GAAG,OAAO,QACV,GAAG,aACH,GAAG,MAAM,QACT,GAAG,YACH,GAAG,QACH,GAAG,UACH,GAAG,QACH,GAAG,WACH;AAEJ;AAEA,SAAS,UAAU,CAAM;IACvB,OACE,GAAG,UACH,GAAG,QACH,GAAG,aACH,GAAG,WACH,GAAG,QACH;AAEJ;AAEA,SAAS,UAAU,CAAM;IACvB,OAAO,GAAG,UAAU,GAAG,UAAU,GAAG,aAAa,GAAG,YAAY,GAAG,SAAS;AAC9E;AAEA,SAAS,SAAS,CAAM;IACtB,MAAM,MAAM,GAAG,QAAQ,GAAG,aAAa,GAAG,MAAM,GAAG,QAAQ,GAAG;IAC9D,MAAM,IAAI,MAAM,IAAI,KAAK,OAAO,IAAI;IACpC,OAAO,MAAM,EAAE,OAAO,MAAM,IAAI,SAAS;AAC3C;AAEA,SAAS,aAAa,CAAO;IAC3B,gBAAgB;IAChB,MAAM,KAAK,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC3C,MAAM,SAAS;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;KAAM;IACxF,MAAM,KAAK,MAAM,CAAC,EAAE,QAAQ,GAAG,IAAI;IACnC,OAAO,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,WAAW,IAAI;AACzC;AAEe,SAAS,iBAAiB,EACvC,IAAI,EAGL;IACC,MAAM,IAAI,SAAS;IACnB,MAAM,QAAQ,SAAS;IACvB,MAAM,SAAS,UAAU;IACzB,MAAM,SAAS,UAAU;IAEzB,MAAM,QACJ,MAAM,SACN,MAAM,WACN,MAAM,YACN,IAAI,WAAW;IAEjB,MAAM,WACJ,MAAM,eACN,MAAM,QACN,MAAM,YACN,IAAI,yBAAyB;IAE/B,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CACb;;;;;;8CAEH,6LAAC;8CAAM;;;;;;gCACN,uBACC,6LAAC;oCAAK,WAAU;8CACb;;;;;2CAED;;;;;;;wBAGL,sBACC,6LAAC;4BAAI,WAAU;sCACZ;;;;;mCAED;wBAEH,yBACC,6LAAC;4BAAI,WAAU;sCACZ;;;;;mCAED;;;;;;;8BAGN,6LAAC;oBAAI,WAAU;8BACZ,aAAa;;;;;;;;;;;;;;;;;AAKxB;KAzDwB"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicolasdagostino/Desktop/Proyecto/A615/src/components/community/NotificationsFeed.tsx"],"sourcesContent":["\"use client\";\n\nimport NotificationItem from \"./NotificationItem\";\nimport { notificationsMock } from \"./notificationsMock\";\n\ntype Scope = \"admin\" | \"coach\" | \"athlete\";\n\nfunction safeDate(n: any) {\n  const raw = n?.date ?? n?.createdAt ?? n?.at ?? n?.time ?? n?.timestamp;\n  const d = raw ? new Date(raw) : new Date();\n  return isNaN(d.getTime()) ? new Date() : d;\n}\n\nfunction getType(n: any) {\n  return (n?.type ?? n?.kind ?? n?.event ?? n?.category ?? \"general\") as string;\n}\n\n// Reglas:\n// - Comunidad muestra últimos 30 días\n// - Athlete: NO ve reservas/cancelaciones/attendance. Ve gym_announcement + wod_comment + general\n// - Coach/Admin: ven todo (por ahora mock)\nfunction isVisible(scope: Scope, n: any) {\n  const t = getType(n);\n\n  if (scope === \"athlete\") {\n    if (\n      t === \"reservation_created\" ||\n      t === \"reservation_cancelled\" ||\n      t === \"reservation\" ||\n      t === \"attendance\" ||\n      t === \"booking\"\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  return true;\n}\n\nfunction sameDay(a: Date, b: Date) {\n  return (\n    a.getFullYear() === b.getFullYear() &&\n    a.getMonth() === b.getMonth() &&\n    a.getDate() === b.getDate()\n  );\n}\n\nfunction formatDayHeader(d: Date) {\n  // Ej: 03 Ene 2026\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  const months = [\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"];\n  return `${dd} ${months[d.getMonth()]} ${d.getFullYear()}`;\n}\n\nexport default function NotificationsFeed({ scope }: { scope: Scope }) {\n  const now = new Date();\n  const cutoff = new Date();\n  cutoff.setDate(cutoff.getDate() - 30);\n\n  const items = [...notificationsMock]\n    .map((n) => ({ n, d: safeDate(n) }))\n    .filter(({ d, n }) => d >= cutoff && isVisible(scope, n))\n    .sort((a, b) => b.d.getTime() - a.d.getTime());\n\n  return (\n    <div className=\"overflow-hidden rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]\">\n      <div className=\"border-b border-gray-200 px-5 py-4 dark:border-gray-800\">\n        <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white/90\">\n          Comunidad\n        </h3>\n        <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n          Últimos 30 días\n        </p>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"px-5 py-6 text-sm text-gray-500 dark:text-gray-400\">\n          No hay notificaciones en los últimos 30 días.\n        </div>\n      ) : (\n        <div className=\"divide-y divide-gray-200 dark:divide-gray-800\">\n          {items.map(({ n, d }, idx) => {\n            const prev = idx > 0 ? items[idx - 1].d : null;\n            const showHeader = !prev || !sameDay(d, prev);\n\n            return (\n              <div key={(n as any).id ?? `${d.getTime()}-${idx}`}>\n                {showHeader ? (\n                  <div className=\"bg-gray-50 px-5 py-2 text-xs font-medium text-gray-600 dark:bg-white/[0.02] dark:text-gray-300\">\n                    {formatDayHeader(d)}\n                  </div>\n                ) : null}\n                <NotificationItem item={n as any} />\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAOA,SAAS,SAAS,CAAM;IACtB,MAAM,MAAM,GAAG,QAAQ,GAAG,aAAa,GAAG,MAAM,GAAG,QAAQ,GAAG;IAC9D,MAAM,IAAI,MAAM,IAAI,KAAK,OAAO,IAAI;IACpC,OAAO,MAAM,EAAE,OAAO,MAAM,IAAI,SAAS;AAC3C;AAEA,SAAS,QAAQ,CAAM;IACrB,OAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,SAAS,GAAG,YAAY;AAC3D;AAEA,UAAU;AACV,sCAAsC;AACtC,kGAAkG;AAClG,2CAA2C;AAC3C,SAAS,UAAU,KAAY,EAAE,CAAM;IACrC,MAAM,IAAI,QAAQ;IAElB,IAAI,UAAU,WAAW;QACvB,IACE,MAAM,yBACN,MAAM,2BACN,MAAM,iBACN,MAAM,gBACN,MAAM,WACN;YACA,OAAO;QACT;QACA,OAAO;IACT;IAEA,OAAO;AACT;AAEA,SAAS,QAAQ,CAAO,EAAE,CAAO;IAC/B,OACE,EAAE,WAAW,OAAO,EAAE,WAAW,MACjC,EAAE,QAAQ,OAAO,EAAE,QAAQ,MAC3B,EAAE,OAAO,OAAO,EAAE,OAAO;AAE7B;AAEA,SAAS,gBAAgB,CAAO;IAC9B,kBAAkB;IAClB,MAAM,KAAK,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC3C,MAAM,SAAS;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;KAAM;IACxF,OAAO,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,WAAW,IAAI;AAC3D;AAEe,SAAS,kBAAkB,EAAE,KAAK,EAAoB;IACnE,MAAM,MAAM,IAAI;IAChB,MAAM,SAAS,IAAI;IACnB,OAAO,OAAO,CAAC,OAAO,OAAO,KAAK;IAElC,MAAM,QAAQ;WAAI,2KAAiB;KAAC,CACjC,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE;YAAG,GAAG,SAAS;QAAG,CAAC,GACjC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAK,KAAK,UAAU,UAAU,OAAO,IACrD,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC,OAAO;IAE7C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAyD;;;;;;kCAGvE,6LAAC;wBAAE,WAAU;kCAAgD;;;;;;;;;;;;YAK9D,MAAM,MAAM,KAAK,kBAChB,6LAAC;gBAAI,WAAU;0BAAqD;;;;;qCAIpE,6LAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;oBACpB,MAAM,OAAO,MAAM,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG;oBAC1C,MAAM,aAAa,CAAC,QAAQ,CAAC,QAAQ,GAAG;oBAExC,qBACE,6LAAC;;4BACE,2BACC,6LAAC;gCAAI,WAAU;0CACZ,gBAAgB;;;;;uCAEjB;0CACJ,6LAAC,iKAAgB;gCAAC,MAAM;;;;;;;uBANhB,AAAC,EAAU,EAAE,IAAI,GAAG,EAAE,OAAO,GAAG,CAAC,EAAE,KAAK;;;;;gBAStD;;;;;;;;;;;;AAKV;KA9CwB"}}]
}